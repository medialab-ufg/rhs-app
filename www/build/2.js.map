{"version":3,"sources":["../../src/pages/search/search.module.ts","../../src/components/information/information.module.ts","../../src/components/information/information.ts","../../src/components/post-card/post-card.module.ts","../../src/components/post-card/post-card.ts","../../src/pages/search/search.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { PostsCardComponentModule } from './../../components/post-card/post-card.module';\nimport { InformationComponentModule } from './../../components/information/information.module';\nimport { SearchPage } from './search';\n\n@NgModule({\n  declarations: [SearchPage],\n  imports: [IonicPageModule.forChild(SearchPage), PostsCardComponentModule, InformationComponentModule],\n})\nexport class SearchPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.module.ts","import { NgModule } from '@angular/core';\nimport { IonicModule } from 'ionic-angular';\n\nimport { InformationComponent } from './information';\n\n@NgModule({\n  declarations: [InformationComponent],\n  imports: [IonicModule],\n  exports: [InformationComponent]\n})\nexport class InformationComponentModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/components/information/information.module.ts","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'information',\n  templateUrl: 'information.html'\n})\nexport class InformationComponent {\n\n  @Input('message') message: string;\n  @Input('detail') detail: string;\n\n  constructor() {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/information/information.ts","import { NgModule } from '@angular/core';\nimport { IonicModule } from 'ionic-angular';\n\nimport { PostCardComponent } from './../../components/post-card/post-card';\n\n@NgModule({\n  declarations: [PostCardComponent],\n  imports: [IonicModule],\n  exports: [PostCardComponent]\n})\nexport class PostsCardComponentModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/components/post-card/post-card.module.ts","import { NavController } from 'ionic-angular';\nimport { Component, Input } from '@angular/core';\n\nimport { ApiProvider } from './../../providers/api/api';\n\n@Component({\n  selector: 'post-card',\n  templateUrl: 'post-card.html'\n})\nexport class PostCardComponent{\n\n  @Input('post-data') post: any;\n\n  constructor(public api: ApiProvider, public navCtrl: NavController ) {\n  }\n\n  goToAuthorPage(event, userId: number) {\n    event.stopPropagation(); // Avoids the click event to propagate to the card, and then go to post page.\n    if (userId == this.api.getUserId()) {\n      this.navCtrl.push('ProfilePage');\n    } else {\n      this.navCtrl.push('UserPage', { 'userId': userId });\n    }\n  }\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/post-card/post-card.ts","import { Component, ViewChild } from '@angular/core';\nimport { NavController, NavParams, IonicPage, Searchbar, Platform } from 'ionic-angular';\nimport { FormControl } from '@angular/forms';\nimport 'rxjs/add/operator/debounceTime';\nimport 'rxjs/add/operator/distinctUntilChanged';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { FirebaseAnalytics } from '@ionic-native/firebase-analytics';\n\nimport { ApiProvider } from './../../providers/api/api';\n\n@IonicPage()\n@Component({\n  selector: 'page-search',\n  templateUrl: 'search.html',\n})\nexport class SearchPage {\n  @ViewChild('searchBar') searchBar: Searchbar;\n\n  postList: Array<any> = new Array<any>();\n  postQueries: { [query: string]: String } = {};\n\n  searchTerm = '';\n  searchControl: FormControl;\n  \n  showSpinner = false;\n  noMoreResults = false;\n\n  categoryFiltering = false;\n  tagFiltering = false;\n  filterName = '';\n\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams,\n              public api: ApiProvider,\n              public platform: Platform,\n              public statusBar: StatusBar,\n              public analytics: FirebaseAnalytics) {\n      \n    this.searchControl = new FormControl();\n    \n    if (this.navParams.get('tagId')) { \n      this.postQueries['tags'] = this.navParams.get('tagId'); \n      this.filterName = this.navParams.get('tagName'); \n      this.tagFiltering = true;\n\n      this.searchPosts(false);\n    }\n    if (this.navParams.get('categoryId')) {\n      this.postQueries['categories'] = this.navParams.get('categoryId'); \n      this.filterName = this.navParams.get('categoryName'); \n      this.categoryFiltering = true;\n      this.searchPosts(false);\n    }\n  }\n\n  ionViewDidLoad() {\n    this.searchControl.valueChanges\n                          .debounceTime(600)\n                          .distinctUntilChanged()\n                          .subscribe(search => this.searchPosts(false));\n  }\n\n  ionViewDidEnter(){\n    this.statusBar.backgroundColorByHexString('008884');\n    this.searchBar.setFocus();\n\n    // Tells analytics that user accessed this screen.\n    this.analytics.setCurrentScreen(\"Posts \")\n    .then((res: any) => console.log(res))\n    .catch((error: any) => console.error(error));\n  }\n\n  ionViewDidLeave(){\n    this.statusBar.backgroundColorByHexString('042830');\n  }\n\n\n  goToPostPage(id: number) {\n    this.navCtrl.push('PostPage', {'postId': id});\n  }\n\n  searchPosts(isLoadingMore: boolean): Promise<any> {\n\n    return new Promise((resolve) => {\n\n      if ((this.searchTerm && this.searchTerm.trim()) || this.categoryFiltering || this.tagFiltering) {\n\n        // New search begins\n        if (isLoadingMore === false) {\n          this.postList = new Array<any>();\n          this.postQueries['page'] = '1';\n          this.postQueries['search'] = this.searchTerm;\n\n          this.showSpinner = true;\n        } \n        //  Infinite scroll calls\n        else if (isLoadingMore === true) {\n          this.postQueries['page'] = Number(this.postQueries['page']) + 1 + '';\n        } \n\n        // Perform the request to the api service\n        this.api.getPostList(this.api.isLogged(), this.postQueries).subscribe(\n          postList => {\n          this.postList = this.postList.concat(postList);     \n          this.noMoreResults = false;\n        },\n        err => {\n          if (err === 400) {\n            this.noMoreResults = true;\n          }\n          console.log('Error ' + err +  ' - On Search Data Request.');\n        },\n        () => { this.showSpinner = false; resolve() });\n\n      }\n      // Empty string or whitespace only \n      else {\n        this.showSpinner = false;\n\n        resolve();\n      }\n    });\n  }\n\n  doInfinite(): Promise<any> {\n    return new Promise((resolve) => {\n      this.searchPosts(true).then(() => resolve());\n    });\n  }\n\n  onCancel(event) {\n    this.navCtrl.pop();\n  }\n\n  deleteFilter(filterChip: Element) {\n    this.postQueries['tags'] = null;\n    this.postQueries['categories'] = null;\n    this.categoryFiltering = false;\n    this.tagFiltering = false;\n    filterChip.remove();\n    this.searchPosts(false);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.ts"],"sourceRoot":""}