{"version":3,"sources":["../../src/pages/user/user.module.ts","../../src/components/information/information.module.ts","../../src/components/information/information.ts","../../src/components/post-card/post-card.module.ts","../../src/components/post-card/post-card.ts","../../src/pages/user/user.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { UserPage } from './user';\n\nimport { InformationComponentModule } from './../../components/information/information.module';\nimport { PostsCardComponentModule } from './../../components/post-card/post-card.module';\n\n@NgModule({\n  declarations: [UserPage],\n  imports: [IonicPageModule.forChild(UserPage), PostsCardComponentModule, InformationComponentModule],\n})\nexport class ProfilePageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user/user.module.ts","import { NgModule } from '@angular/core';\nimport { IonicModule } from 'ionic-angular';\n\nimport { InformationComponent } from './information';\n\n@NgModule({\n  declarations: [InformationComponent],\n  imports: [IonicModule],\n  exports: [InformationComponent]\n})\nexport class InformationComponentModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/components/information/information.module.ts","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'information',\n  templateUrl: 'information.html'\n})\nexport class InformationComponent {\n\n  @Input('message') message: string;\n  @Input('detail') detail: string;\n\n  constructor() {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/information/information.ts","import { NgModule } from '@angular/core';\nimport { IonicModule } from 'ionic-angular';\n\nimport { PostCardComponent } from './../../components/post-card/post-card';\n\n@NgModule({\n  declarations: [PostCardComponent],\n  imports: [IonicModule],\n  exports: [PostCardComponent]\n})\nexport class PostsCardComponentModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/components/post-card/post-card.module.ts","import { NavController } from 'ionic-angular';\nimport { Component, Input } from '@angular/core';\n\nimport { ApiProvider } from './../../providers/api/api';\n\n@Component({\n  selector: 'post-card',\n  templateUrl: 'post-card.html'\n})\nexport class PostCardComponent{\n\n  @Input('post-data') post: any;\n\n  constructor(public api: ApiProvider, public navCtrl: NavController ) {\n  }\n\n  goToAuthorPage(event, userId: number) {\n    event.stopPropagation(); // Avoids the click event to propagate to the card, and then go to post page.\n    if (userId == this.api.getUserId()) {\n      this.navCtrl.push('ProfilePage');\n    } else {\n      this.navCtrl.push('UserPage', { 'userId': userId });\n    }\n  }\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/post-card/post-card.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, IonicPage, AlertController, ToastController } from 'ionic-angular';\nimport { FirebaseAnalytics } from '@ionic-native/firebase-analytics';\n\nimport { ApiProvider } from './../../providers/api/api';\n\n@IonicPage()\n@Component({\n  selector: 'page-user',\n  templateUrl: 'user.html',\n})\nexport class UserPage {\n\n  userId: number;\n  user: any;\n  userPostsList: Array<any> = new Array<any>();\n\n  isFollowing: boolean = false;\n\n  postQueries: { [query: string]: String } = {};\n\n  isLoadingUser: boolean = true;\n  isLoadingUserPosts: boolean = true;\n  noMoreResults: boolean = false;\n\n  userInfoView: string = 'posts';\n\n\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams,\n              public api: ApiProvider,\n              public alertCtrl: AlertController,\n              public toastCtrl: ToastController,\n              public analytics: FirebaseAnalytics) {\n\n    this.userId = this.navParams.get('userId');\n    this.loadUser();\n  }\n\n  ionViewDidLoad() {\n\n    for (let followId of this.api.followingUsers) {\n      if (followId == this.userId) {\n        this.isFollowing = true;\n      }\n    }\n  }\n\n  ionViewDidEnter(){\n    // Tells analytics that user accessed this screen.\n    this.analytics.setCurrentScreen(\"User:\" + this.userId)\n    .then((res: any) => console.log(res))\n    .catch((error: any) => console.error(error));\n  }\n\n  followUser() {\n    this.api.followUser(this.userId).subscribe(\n      response => {\n        console.log(response);\n        \n        this.isFollowing = true;\n        this.api.followingUsers.push(response.follow_id);\n\n        let followConfirmToast = this.toastCtrl.create({\n          message: 'Agora você está seguindo este usuário :)',\n          duration: 3000\n        });\n        followConfirmToast.present();\n      },\n      err => {\n        console.log('Error ' + err + ' on follow user request.');\n        this.isFollowing = false;\n      }\n    );\n  }\n\n  unFollowUser() {\n    this.api.unFollowUser(this.userId).subscribe(\n      response => {\n        console.log(response);\n        \n        this.isFollowing = false;\n        this.api.followingUsers.unshift(response.follow_id);\n\n        let unFollowConfirmToast = this.toastCtrl.create({\n          message: 'Você deixou de seguir este usuário',\n          duration: 3000\n        });\n        unFollowConfirmToast.present();\n      },\n      err => {\n        console.log('Error ' + err + ' on follow user request.');\n        this.isFollowing = false;\n      }\n    );\n\n  }\n            \n  loadUser() {\n    this.isLoadingUser = true;\n\n    this.api.getAuthorInfo(this.userId, false).subscribe(\n      userInfo => {\n      this.user = userInfo;\n      this.loadUserPosts(false);\n    },\n    err => {\n      console.log('Error ' + err +  ' - On User Data Request.');\n    },\n    () => this.isLoadingUser = false);    \n  }\n\n  loadUserPosts(isLoadingMore: boolean): Promise<any> {\n    \n    return new Promise((resolve) => {\n\n      this.postQueries['author'] = String(this.user['id']);\n      if (this.api.isLogged()) {\n        this.postQueries['status'] = 'publish,voting-queue';\n      }\n\n      if (isLoadingMore === false) {\n        this.userPostsList = new Array<any>();\n        this.postQueries['page'] = '1';\n      } \n      //  Infinite scroll calls\n      else if (isLoadingMore === true) {\n        this.postQueries['page'] = Number(this.postQueries['page']) + 1 + '';\n      } \n\n      this.api.getPostList(this.api.isLogged(), this.postQueries).subscribe(\n        postList => {\n        this.userPostsList = this.userPostsList.concat(postList);    \n        this.noMoreResults = false;\n      },\n      err => {\n        if (err === 400) {\n          this.noMoreResults = true;\n        }\n        console.log('Error ' + err +  ' - On User Posts List Data Request.');\n      },\n      () => { this.isLoadingUserPosts = false; resolve() } );\n\n    });\n  }\n\n  goToPostPage(postId: number) {\n    this.navCtrl.push('PostPage', {'postId': postId});\n  }\n\n  doInfinite(): Promise<any> {\n    return new Promise((resolve) => {\n      this.loadUserPosts(true).then(() => resolve());\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user/user.ts"],"sourceRoot":""}