{"version":3,"sources":["../../src/pages/notifications/notifications.module.ts","../../src/components/information/information.module.ts","../../src/components/information/information.ts","../../src/pages/notifications/notifications.ts","../../src/pipes/inner-html-notification/inner-html-notification.ts","../../src/pipes/inner-html-image/inner-html-image.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { NotificationsPage } from './notifications';\n\nimport { InnerHtmlNotificationPipe } from './../../pipes/inner-html-notification/inner-html-notification';\nimport { InnerHtmlImagePipe } from './../../pipes/inner-html-image/inner-html-image';\n\nimport { InformationComponentModule } from './../../components/information/information.module';\n\n@NgModule({\n  declarations: [NotificationsPage, InnerHtmlNotificationPipe, InnerHtmlImagePipe],\n  imports: [IonicPageModule.forChild(NotificationsPage), InformationComponentModule],\n})\nexport class NotificationsPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notifications/notifications.module.ts","import { NgModule } from '@angular/core';\nimport { IonicModule } from 'ionic-angular';\n\nimport { InformationComponent } from './information';\n\n@NgModule({\n  declarations: [InformationComponent],\n  imports: [IonicModule],\n  exports: [InformationComponent]\n})\nexport class InformationComponentModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/components/information/information.module.ts","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'information',\n  templateUrl: 'information.html'\n})\nexport class InformationComponent {\n\n  @Input('message') message: string;\n  @Input('detail') detail: string;\n\n  constructor() {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/information/information.ts","import { AuthenticationProvider } from './../../providers/authentication/authentication';\nimport { Component } from '@angular/core';\nimport { NavController, NavParams, IonicPage } from 'ionic-angular';\nimport { FirebaseAnalytics } from '@ionic-native/firebase-analytics';\n\nimport { ApiProvider } from './../../providers/api/api';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-notifications',\n  templateUrl: 'notifications.html',\n})\nexport class NotificationsPage {\n\n  notifications: Array<any> = new Array<any>();\n  queries: { [query: string]: String } = {};\n\n  isUserLogged: boolean = false;\n\n  noMoreResults: boolean = false;\n  isLoadingMore: boolean = false;\n  showSpinner: boolean = false;\n  loadingFromRefresher: boolean = false;\n\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams,\n              public api: ApiProvider,\n              public authentication: AuthenticationProvider,\n              public analytics: FirebaseAnalytics) {\n\n    this.notifications = new Array<any>();\n    this.authentication.userLogged.subscribe(value => {\n      if (value === true) {\n        this.isUserLogged = this.api.isLogged();\n        this.loadNotifications(false);\n      }\n    });\n  }\n\n  ionViewDidLoad() {\n\n    this.isUserLogged = this.api.isLogged();\n\n    if (this.isUserLogged === true) { \n      this.loadNotifications(false);\n    }\n\n    this.api.markNotificationsAsRead().subscribe(\n      response => console.log('Notifications marked as read for user ' + response),\n      err => console.log('Error ' + err +  ' - On Notifications Data Request.')\n    );\n  }\n\n  ionViewDidEnter() {\n    // Tells analytics that user accessed this screen.\n    this.analytics.setCurrentScreen(\"Notifications\")\n    .then((res: any) => console.log(res))\n    .catch((error: any) => console.error(error));\n  }\n\n  loadNotifications(isLoadingMore: boolean): Promise<any> {\n    \n    return new Promise((resolve) => {\n      \n      this.showSpinner = true;\n\n      if (isLoadingMore === false) {\n        this.notifications = new Array<any>();\n        this.queries['page'] = '1';\n      } \n      // Infinite scroll calls\n      else if (isLoadingMore === true) {\n        this.showSpinner = false;\n        this.queries['page'] = Number(this.queries['page']) + 1 + '';\n      } \n\n      this.api.getNotificationList(true, this.queries['page']).subscribe(\n        notificationList => {\n            this.notifications = this.notifications.concat(notificationList);\n            this.noMoreResults = false;\n            console.log(this.notifications);\n            if (notificationList.length == 0) {\n              this.noMoreResults= true;\n            }\n          },\n          err => {\n            if (err === 400) {\n              this.noMoreResults = true;\n            }\n            console.log('Error ' + err +  ' - On Notifications Data Request.');\n          },\n          () => { this.showSpinner = false; this.loadingFromRefresher = false; resolve() });\n        \n    });\n  }\n\n  goToNotificationContent(index: number){\n\n    if (this.notifications[index]['type'] == 'comments_in_post') {\n        this.navCtrl.push('CommentPage', { 'commentId': this.notifications[index]['object_id'] });\n    } else if (this.notifications[index]['type'] == 'new_community_post' || \n               this.notifications[index]['type'] == 'post_followed' || \n               this.notifications[index]['type'] == 'post_promoted' || \n               this.notifications[index]['type'] == 'replied_ticket' || \n               this.notifications[index]['type'] == 'new_post_from_user') {\n        this.navCtrl.push('PostPage', { 'postId': this.notifications[index]['object_id'] });\n    } else if(this.notifications[index]['type'] == 'user_follow_author') {\n        this.navCtrl.push('UserPage', { 'userId': this.notifications[index]['user_id'] });\n    }\n  }\n\n  doRefresh(refresher) {\n    this.loadingFromRefresher = true;\n    this.loadNotifications(false).then(() => refresher.complete());\n  }\n\n  doInfinite(): Promise<any> {\n    return new Promise((resolve) => {\n      this.loadNotifications(true).then(() => resolve());\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notifications/notifications.ts","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser'\n\n@Pipe({\n  name: 'innerHtmlNotification',\n})\nexport class InnerHtmlNotificationPipe implements PipeTransform {\n\n  //private aTagPattern: RegExp = new RegExp(/<a[\\s]+([^>]+)>((?:.(?!\\<\\/a\\>))*.)<\\/a>/g);\n  //private contentPattern: RegExp = new RegExp(/<a>(.*?)<\\/a>/g);\n\n  constructor(private dom: DomSanitizer) { }\n  \n  transform(value: string, ...args) {\n    //console.log(value);\n    //console.log(value.match(this.aTagPattern));\n\n   \n      /*\n      // Converts to a tag object\n      let divTagHtml = document.createElement('div'); \n      divTagHtml.innerHTML = aTagStr;\n      let aTagHtml = divTagHtml.firstChild;\n\n      // Gets ID from a tag\n      aTagHtml.attributes.removeNamedItem('href');\n      */    \n    \n    //console.log(value);\n    return this.dom.bypassSecurityTrustHtml(value);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/inner-html-notification/inner-html-notification.ts","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser'\n\n@Pipe({\n  name: 'innerHtmlImage',\n})\nexport class InnerHtmlImagePipe implements PipeTransform {\n\n\n  private imgTagPattern: RegExp = new RegExp(/<img\\s[^>]*?src\\s*=\\s*['\\\"]([^'\\\"]*?)['\\\"][^>]*?>/g);\n\n  constructor(private dom: DomSanitizer) { }\n\n  transform(value: string, ...args) {\n\n    console.log(value.match(this.imgTagPattern))\n\n    if (value.match(this.imgTagPattern)) {\n      value = value.match(this.imgTagPattern)[0];\n    }\n\n    return this.dom.bypassSecurityTrustHtml(value);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/inner-html-image/inner-html-image.ts"],"sourceRoot":""}