{"version":3,"sources":["../../src/pages/comment/comment.module.ts","../../src/pages/comment/comment.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CommentPage } from './comment';\n\n@NgModule({\n  declarations: [CommentPage],\n  imports: [IonicPageModule.forChild(CommentPage)],\n})\nexport class CommentPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/comment/comment.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { NavController, NavParams, IonicPage } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { FirebaseAnalytics } from '@ionic-native/firebase-analytics';\n\nimport { ApiProvider } from './../../providers/api/api';\n\n@IonicPage()\n@Component({\n  selector: 'page-comment',\n  templateUrl: 'comment.html',\n})\nexport class CommentPage {\n  @ViewChild('responseInput') responseInput;\n\n  postId: number;\n  comment: any;\n  response: any = null;\n  commentId: any = null;\n\n  responseContent: string = '';\n  isPostingResponse: boolean = false;\n  didResponded: boolean = false;\n  isLoadingComment = false;\n\n  returnFromCommentFunction: any;\n\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams,\n              public api: ApiProvider,\n              public statusBar: StatusBar,\n              public analytics: FirebaseAnalytics) {\n    this.postId = this.navParams.get('postId');\n    this.comment = this.navParams.get('comment');\n    this.commentId = this.navParams.get('commentId'); // If null, we came from post page, instead of notification.\n\n    if (this.commentId != null) {\n      this.loadComment();\n    }\n  }\n\n  ionViewDidEnter() {\n    setTimeout(() => {\n      this.responseInput.setFocus();\n    }, 150);\n\n    // Tells analytics that user accessed this screen.\n    this.analytics.setCurrentScreen(\"Comments\")\n    .then((res: any) => console.log(res))\n    .catch((error: any) => console.error(error));\n  }\n\n  ionViewWillEnter() {\n    this.statusBar.backgroundColorByHexString('008884');\n    this.returnFromCommentFunction = this.navParams.get(\"returnFromCommentFunction\")\n  }\n\n  ionViewDidLeave(){\n    this.statusBar.backgroundColorByHexString('042830');\n  }\n\n  ionViewWillLeave() {\n    this.returnFromCommentFunction(this.didResponded ? 1 : 0).then(()=>{});\n  }\n\n  loadComment() {\n    this.isLoadingComment = true;\n\n    this.api.getComment(this.commentId).subscribe(\n      comment => {\n        this.comment = comment;\n      },\n      err => {\n        console.log('Error ' + err +  ' - on loading post content.');\n      },\n      () => this.isLoadingComment = false\n    );\n  }\n\n  postResponse() {\n    \n    this.isPostingResponse = true;\n\n    this.api.commentOnPost(this.comment['post'], this.responseContent, this.comment['id']).subscribe(\n      commentResponse => {\n      \n        this.responseContent = '';\n        this.response = commentResponse;\n        this.didResponded = true;\n\n        this.analytics.logEvent('new_comment', {post_id: this.postId, user_id: this.api.getUserId()})\n        .then((res: any) => console.log(res))\n        .catch((error: any) => console.error(error));\n    },\n    err => {\n      console.log('Error ' + err +  ' - On Response Data posting.');\n      this.didResponded = false;\n      this.isPostingResponse = false;\n    },\n    () => this.isPostingResponse = false);\n  }\n\n  changeInputSize() {\n    // Get elements\n    let element  = document.getElementById('responseInput');\n    let textarea = element.getElementsByTagName('textarea')[0];\n\n    // Set default style for textarea\n    textarea.style.minHeight  = '0';\n    textarea.style.height     = '0';\n\n    // Limit size to 96 pixels (6 lines of text)\n    let scroll_height = textarea.scrollHeight;\n    if(scroll_height > 96)\n      scroll_height = 96;\n\n    // Apply new style\n    element.style.height      = scroll_height + \"px\";\n    textarea.style.minHeight  = scroll_height + \"px\";\n    textarea.style.height     = scroll_height + \"px\";\n  }\n\n  goToPostPage() {\n    this.navCtrl.push('PostPage', {'postId': this.comment['post'] });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/comment/comment.ts"],"sourceRoot":""}