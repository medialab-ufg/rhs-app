{"version":3,"sources":["../../src/pages/following/following.module.ts","../../src/components/information/information.module.ts","../../src/components/information/information.ts","../../src/pages/following/following.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { InformationComponentModule } from './../../components/information/information.module';\nimport { FollowingPage } from './following';\n\n@NgModule({\n  declarations: [FollowingPage],\n  imports: [IonicPageModule.forChild(FollowingPage), InformationComponentModule],\n})\nexport class FollowingPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/following/following.module.ts","import { NgModule } from '@angular/core';\nimport { IonicModule } from 'ionic-angular';\n\nimport { InformationComponent } from './information';\n\n@NgModule({\n  declarations: [InformationComponent],\n  imports: [IonicModule],\n  exports: [InformationComponent]\n})\nexport class InformationComponentModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/components/information/information.module.ts","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'information',\n  templateUrl: 'information.html'\n})\nexport class InformationComponent {\n\n  @Input('message') message: string;\n  @Input('detail') detail: string;\n\n  constructor() {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/information/information.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, IonicPage, AlertController, ToastController } from 'ionic-angular';\nimport { FirebaseAnalytics } from '@ionic-native/firebase-analytics';\n\nimport { AuthenticationProvider } from './../../providers/authentication/authentication';\nimport { ApiProvider } from './../../providers/api/api';\n\n@IonicPage()\n@Component({\n  selector: 'page-following',\n  templateUrl: 'following.html',\n})\nexport class FollowingPage {\n\n  followingView = 'people';\n\n  postList: Array<any> = new Array<any>();\n  userList: Array<any> = new Array<any>();\n\n  postQueries: { [query: string]: String } = {};\n  userQueries: { [query: string]: String } = {};\n\n  showSpinner = false;\n  isUserLogged: boolean = false;\n  loadingFromRefresher: boolean = false;\n\n  noMoreResultsOnPosts: boolean = false;\n  noMoreResultsOnPeople: boolean = false;\n\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams,\n              public api: ApiProvider,\n              public authentication: AuthenticationProvider,\n              public alertCtrl: AlertController,\n              public toastCtrl: ToastController,\n              public analytics: FirebaseAnalytics) {\n\n      this.isUserLogged = this.api.isLogged();\n      this.authentication.userLogged.subscribe(value => {\n      \n        if (value === true) {\n\n        this.isUserLogged = this.api.isLogged();\n\n        if (this.followingView == 'posts') {\n          this.loadPosts(false);\n        } else {\n          this.loadUsers(false);\n        }\n      }\n    });\n  }\n\n  ionViewDidLoad() {\n\n    if (this.api.isLogged() === true) { \n     if (this.followingView == 'posts') {\n        this.loadPosts(false);\n      } else {\n        this.loadUsers(false);\n      }\n    }\n  }\n\n  ionViewDidEnter() {\n    // Tells analytics that user accessed this screen.\n    this.analytics.setCurrentScreen(\"Following\")\n    .then((res: any) => console.log(res))\n    .catch((error: any) => console.error(error));\n  }\n\n  loadPosts(isLoadingMore: boolean) {}\n\n  loadUsers(isLoadingMore: boolean) : Promise<any> {\n\n    this.showSpinner = true;\n\n    return new Promise((resolve) => {\n      //  Pull to refresh or update service calls.\n      if (isLoadingMore === false) {\n        this.userList = new Array<any>();\n        this.userQueries['page'] = '1';\n      } \n      //  Infinite scroll calls\n      else if (isLoadingMore === true) {\n        this.userQueries['page'] = Number(this.userQueries['page']) + 1 + '';\n      } \n      //  Switching segment controller calls\n      else {\n        if (this.userList.length === 0) {\n          this.showSpinner = true;\n          this.userQueries['page'] = '1';\n        }     \n      }\n      // Adds array of following posts to query\n      if (this.api.followingUsers.length > 0) {\n\n        let usersIds = String(this.api.followingUsers.join(','));\n\n        // Perform the request to the api service\n        this.api.getUserList(true, usersIds, this.userQueries).subscribe(\n          userList => {\n          this.userList = this.userList.concat(userList);\n          console.log(this.userList);\n          this.noMoreResultsOnPeople = false;\n        },\n        err => {\n          if (err === 400) {\n            this.noMoreResultsOnPeople = true;\n          }\n          console.log('Error ' + err +  ' - On User Data Request.');\n        },\n        () => { this.showSpinner = false; this.loadingFromRefresher = false; resolve() });\n      } else {\n        this.showSpinner = false;\n        this.authentication.userLogged.subscribe(value => {\n          if (value === true) {\n            this.isUserLogged = true;\n            this.loadUsers(isLoadingMore);\n          }\n        });\n      }\n    });\n  }\n\n  doRefresh(refresher) {\n    this.loadingFromRefresher = true;\n    this.loadUsers(false).then(() => refresher.complete());\n  }\n\n  doInfinite(): Promise<any> {\n    return new Promise((resolve) => {\n      this.loadUsers(true).then(() => resolve());\n    });\n  }\n\n  goToUserPage(userId: number) {\n    this.navCtrl.push('UserPage', { 'userId': userId });\n  }\n\n  stopButton(event, index: number) {\n\n    event.stopPropagation();\n\n    let prompt = this.alertCtrl.create({\n      title: 'Deseja parar de seguir este usuário?',\n      message: \"Você deixará de receber notificações quando ele publicar um post novo.\",\n      buttons: [\n        {\n          text: 'Cancelar',\n          handler: data => { }\n        },\n        {\n          text: 'Parar',\n          handler: data => {\n            this.unFollowUser(index);  \n          }\n        }\n      ]\n    });\n    prompt.present();\n  }\n\n  unFollowUser(index: number) {\n    this.api.unFollowUser(this.userList[index]['data']['id']).subscribe(\n      response => {\n\n        this.userList.splice(index, 1);\n        this.api.followingUsers.splice(index, 1);\n\n        let unFollowConfirmToast = this.toastCtrl.create({\n          message: 'Você deixou de seguir este usuário',\n          duration: 3000\n        });\n        unFollowConfirmToast.present();\n      },\n      err => {\n        console.log('Error ' + err + ' on follow user request.');\n      }\n    );\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/following/following.ts"],"sourceRoot":""}